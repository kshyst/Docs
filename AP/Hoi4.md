# توضیحات بازی
قلبی از آهن (Hearts of Iron)  یک بازی گرند استراتژیک است که هدف مدیریت منابع اقتصادی، انسانی و طبیعی یک کشور است و قرار می‌باشد که از نظر سیاسی، اقتصادی و نظامی سرزمین خود را به قوی‌ترین کشور تبدیل کنید. 
گیم‌پلی اصلی این بازی دارای بی‌نهایت پیچیدگی است. شما قرار است یک نسخه ساده‌شده‌ی آن را پیاده‌سازی بکنید.

![HOI4](https://forumcontent.paradoxplaza.com/public/761722/1637078444238.png)

هر بازیکن در ابتدا بازی یک کشور را برای مدیریت انتخاب می‌کند و هر کشور دارای چندین منطقه است که در طول بازی خصوصیات آن‌ها معین می‌شوند. در بازی اصلی شما تمام کشور های موجود در دوران جنگ جهانی دوم را 
می‌توانید انتخاب کنید. برای سادگی ما نقشه زیر را برای بازی در نظر گرفته‌ایم.

![world map](https://s33.picofile.com/file/8483030092/Group_35092.png)

---
در هر یک از بخش‌های برنامه اگر عبارتی وارد شد، به ترتیب ذکر شده خطا‌ها را چک کنید و فقط اولین خطای رخ داده را چاپ کنید. اگر که دستور متناظر با آن وجود نداشت عبارت

    invalid command
   را خروجی دهید.

*توجه شود که دستورات ممکن است با white space اضافه داده شوند.*
*توجه شود خطاهای هر بخش به همان ترتیبی که اینجا بیان شده است چک می‌شوند و فقط لازم است اولین خطا را چک بنمایید.*

*در تمام قسمت هایی که گفته شده اسم دلخواه وارد کنید برای مثال برای ساخت گردان و کارخانه ، تضمین می‌شود تست عجیبی داده نشود. مثلا وایت اسپیس وسط اسم و این چیزا*

همچنین در هر منویی که باشیم با دستور

    show current menu
   می‌توانیم منویی که درحال حاضر در آن هستیم را مشاهده کنیم که یکی از حالت‌های زیر را دارد:

    login menu
    signup menu
    profile menu
    main menu
    game menu
  
  ترتیب منو ها پس از آغاز برنامه به این صورت است :
  signup menu -> login menu -> main menu -> game menu
*ورود به profile menu از main menu  و خروج از آن هم به main menu است پس به منو های دیگر راه ندارد.*
  
   برای خروج از main menu و ورود به signup menu دستور

    logout
   وارد کنید.

برای خروج از login menu و ورود به signup menu دستور
```
back
```


ه۰مچنین برای خروج از profile menu و بازگشت به main menu دستور

    back
   
   و در هر صفحه برای خروج کامل و اتمام پردازش برنامه دستور 

    exit
   
   باقی دستورات در بخش مربوطه گفته خواهد شد.

---
# منوی ثبت‌نام (signup menu)
## ثبت‌نام
در این منو هر کاربر می تواند با دستور

    register -username <username> -password <password> -email <email> 
   به عنوان کاربر جدید به بازی اضافه شود و وارد منوی login بشود.

1.  بخش username تنها می‌تواند شامل حروف کوچک و بزرگ ٰانگلیسی ، عدد و همچین آندرلاین باشد.
2. حرف اول username نمیتواند آندرلاین یا عدد باشد.
3.  بخش password باید دارای حداقل 8 کاراکتر و حداکثر 20 کاراکتر باشد و همچنین حداقل یک کاراکتر از میان کاراکترهای %@#$^&! را داشته باشد. رمز عبور نباید با کاراکتری غیر از حروف کوچک یا بزرگ انگلیسی شروع شود و نباید دارای فاصله یا کاراکتر اسپیس باشد.
4.  بخش ایمیل باید به به صورت [mail>@<domain>.com>](mailto:fozoli@dadash?.com) باشد و بخش های mail و domain نباید خالی باشند. بخش mail آن نیز تنها می‌تواند دارای حروف کوچک و بزرگ انگلیسی، اعداد و "." باشد. ایمیل نباید بیش از یکبار کاراکتر `.` را داشته باشد.

## خطاها

اگر username دارای ساختار نادرست بود عبارت زیر چاپ شود:

    invalid username
اگر کاربری با username گفته شده وجود داشت:

    username is already taken

 اگر password کوتاه  یا بلند بود:

    invalid length

  اگر password دارای کارکتر اسپیس یا فاصله بود:
  
    don't use whitespace in password   

 اگر password با حروفی بجز حروف کوچک و بزرگ انگلیسی شروع شد:

    password must start with English letters
   اگر پسورد دارای هیچکدام از %@#$^&! نبود:
   
    password doesn't have special characters
اگر ایمیل دارای ساختار گفته شده نبود:

    invalid email format
در غیر این صورت ثبت‌نام با موفقیت انجام می‌شود و پیام زیر چاپ میشود و به طور خودکار وارد منوی لاگین (login) می‌شویم.
```
user registered successfully
```

## رفتن به منوی لاگین (login menu)

برای ورود مستقیم به منوی لاگین بدون ثبت‌نام کردن:
```
login
```

---
# منوی لاگین (login menu)
## **ورود کاربر** 
کاربر می‌تواند با وارد کردن دستور :
```
login -username <username> -password <password>
```

وارد منوی اصلی (main menu) شود


## **خطاها :**

اگر کاربری با نام کاربری داده شده وجود نداشت باید خطای زیر را نمایش داده شود:
```
username doesn't exist!
```

اگر کلمه عبور داده شده اشتباه بود باید خطای زیر را نمایش دهید:
```
password is incorrect!
```

***در صورتی که کاربر با خطایی مواجه نشد، با موفقیت وارد می‌شود و پس از چاپ پیام زیر، وارد منوی اصلی می‌شود.***
```
user logged in successfully
```

## **فراموشی رمز عبور** 
کاربر می‌تواند با دستور زیر از قابلیت فراموشی رمز عبور استفاده کند و رمز عبور خود را ببیند:
```
forget-password -username <username> -email <email>
```

## **خطاها :**

اگر کاربری با نام کاربری داده شده وجود نداشت باید خطای زیر را نمایش داده شود :
```
username doesn't exist!
```

اگر ایمیل داده شده اشتباه بود باید خطای زیر را نمایش دهید :
```
email doesn't match!
```

***در صورتی که کاربر با خطایی مواجه نشد،  رمز عبور  کاربر در قالب زیر نمایش داده شود.***
```
password: <password>
```

---
# **منوی اصلی بازی (main menu)**
پس از لاگین کردن وارد این منو می‌شوید .

برای ورود به منوی پروفایل دستور زیر را بزنید:
```
profile
```

برای شروع کردن بازی لازم دستور زیر را وارد کرده و چند یوزر حریف را به اختیار برای بازی کردن انتخاب کنید. توجه کنید که انتخاب کردن یوزر حریف اختیاری است و میتوانید بین 0 تا 4 یوزر موجود را که از پیش ثبت‌نام کرده‌اند انتخاب کنیم.
باقی بازیکنان بازی به صورت مهمان و با آیدی های guest1 , guest2 ... در می‌آیند.

```
play <user1> <user2> <user3> <user4>
```

برای مثال به عنوان یوزر "kiarash" لاگین هستیم و می‌خواهیم با 2 یوزر دیگر بازی را شروع کنیم :
```
play amirhossein sana
```

آن وقت بازی با این بازیکنان به ترتیب شروع می‌شود و هر بازیکن کشورش را انتخاب می‌کند:
```
kiarash
amirhossein
sana
guest1
guest2
```

در رابطه با بازیکنان guest در بخش توضیحات game menu بیشتر توضیح داده خواهد شد.

## **خطاها **
اگر یکی از یوزر های انتخاب شده موجود نبود خطای زیر:
```
select between available users
```

اگر یوزر تکراری در لیست وارد شده وجود داشت خطای زیر:
```
users must be distinct
```

اگر حداقل یکی از یوزرهای وارد شده همان یوزری باشد که با آن لاگین کرده‌ایم خطای زیر:
```
you can't choose urself
```

در نهایت اگر خطایی رخ نداد پس از چاپ پیغام زیر وارد game menu می‌شوید:
```
aghaaz faAliat
```

---
# منوی پروفایل (profile menu)
---------------------------------------------------------------------------------------فعلا اینجا اسکیپ

---
# منوی بازی (game menu)

در ابتدای بازی هر بازیکن به ترتیب گفته شده (ابتدا بازیکن لاگین شده -> بازیکنان انتخابی -> مهمانان) باید کشور خود را انتخاب کنند. انتخاب کشور بین گزینه های زیر است:

```
German Reich
United States
Soviet Union
Japan
United Kingdom
```


در شروع بازی عبارت زیر به ازای هر بازیکن چاپ می‌شود و بازیکنان کشور خود را انتخاب می‌کنند.

```
choosing country for <username>:
```


و هرکس باید اسم کشور خود را در نوبت خود چاپ کند.

## **خطاها**

اگر اسم کشور انتخابی بین ۵ عبارت بالا نبود:

```
wrong country name
```


اگر بازیکنی کشور تکراری انتخاب بکند:

```
country already taken
```

اگر خطایی رخ ندهد پیامی چاپ نمی‌شود و نوبت دست بازیکن اول است و برنامه منتظر وارد شدن دستور می‌ماند.

## تعویض بازیکن

در ابتدای بازی شما به عنوان یوزر اول بازی می‌کنید. یعنی کنترل کشوری که یوزر اول انتخاب کرده است را در دست دارید و دستورات وارد شده شما برای آن کشور کار می‌کند. برای رفتن روی بازیکنان دیگر و بدست گیری کنترل کشور های دیگر:

```
switch player <username>
```


## **خطاها**

اگر یوزرنیم وارد شده ناموجود بود:

```
player doesn't exist
```


اگر بازیکن اسم خودش را وارد کرد:

```
you can't switch to yourself
```

اگر خطایی رخ نداد:

```
switched to <username>
```

---
## کشور‌ها (Countries)

<details>
<summary>
توجه
</summary>
کشور های بازی به صورت ثابت مشخص اند و ۵ حالت گفته شده را دارند. بدیهتا می‌توانید کشور هارو هارد-کد کنید ولی کار خودتون سخت میشه.( این یعنی مثل آدمیزاد oop پیادش کنید.)
</details>


متغیر های مربوط به هر کشور به این صورت است:


**رهبر** : هسته مرکزی یک دولت است که بر حسب ایدئولوژی منحصر به فرد خود بر روند های مختلف بازی موثر خواهد بود. رهبر دارای سطح محبوبیت است که در انتخابات مردمی رهبر موثر است.

**ثبات (Stability)** : این یک مقدار درصدی است که نشان می‌دهد دولت یک کشور چقدر ثبات دارد. این مقدار در طی اتفاقاتی مانند شکست در جنگ ها کم می‌شود. اگر این مقدار به زیر 50% برسد ‌، وارد کردن دستور جدید برای بازیکن قفل خواهد شد و مجبور به برگزاری انتخابات جدید و تعیین رهبر جدید می‌شود.

**تایل ها** : هر کشور مجموعه ای از تایل هارو دارد که در نقشه داده شده ایندکس های آن مشخص است. برای توضیحات تکمیلی  به بخش زمین‌ها مراجعه کنید.

**منابع** : هر کشور منابع مختلفی دارد که در بخش های مختلف بازی برای ساخت کارخانه ، گردان ، استخراج منابع دیگر و ... استفاده می‌شود. منابع هر کشور شامل زیر است:

- منابع انسانی (Man Power) : شامل جمعیت هر کشور است.
- سوخت (Fuel): در جاهایی مثل ساخت گردان استفاده می‌شود.
- آهن (Iron)
- گوگرد(sulfur)

میزان منابع اولیه ای که به کشور ها تعلق می‌گیرد به این صورت است:

![resources](https://s33.picofile.com/file/8483161184/Group_35103.png)

<details>
<summary>
نکته
</summary>
از انگلیس بدم میاد.
</details>

**پاپت (Puppet)** : به کشوری پاپت می گویند که کنترلش دست کشور دیگر است. برای اینکه یک کشور را پاپت خود کنیم شرایطی وجود دارد که در بخش مربوطه توضیح داده خواهد شد.

**جناح (Faction)** : چیزی مانند کانسپت clan در بازی clash of clans. توضیحات بیشتر در بخش مربوطه.

### رهبر (Leader)

هر کشور چند گزینه برای رهبر دارد که لیست آنها در زیر آورده شده است. رهبر ها در ایدئولوژی ها متفاوتند.

![Leaders](https://s33.picofile.com/file/8483169034/Group_35098_1_.png)

رهبر های در ابتدا داری سطح محبوبیت popularity صد‌در‌صد است (۱۰۰٪) . در طی روند بازی این مقدار کاهش می‌یابد.

رهبر های اولیه هر کشور در ابتدای بازی با رنگ قرمز نشان داده شده اند.

---
### زمین‌ها (Tiles)

<details>
<summary>
توجه
</summary>
اسم فارسی زمین‌هارو نوشتم ولی در طول داک بهش میگم **تایل** پس قاطی نکنید.
</details>

نقشه‌ی بازی رو دوباره برای راحتی اینجا می‌گذاریم:![map](https://s33.picofile.com/file/8483030092/Group_35092.png)

همانطور که میبینید بازی ۵۶ زمین دارد که هرکدام جز مرز یک کشور مشخص است. زمین های بازی برای راحتی کار شما از پیش تعیین شده و شما برای کار کردن با این تایل‌ها باید یک سری چیز برای هرکدام مشخص کنید.

**ایندکس**: هر تایل با یک عدد شناخته می‌شود که در طول بازی با این عدد ها تایل‌ها را دستکاری می‌کنیم. مثلا شوروی تایل های ۱ تا ۱۶ را در ابتدای بازی دارد.

**مالک**: هر تایل مال یک کشور است که در طول روند بازی مالک ممکن است تغییر کند. مالکان اولیه در نقشه مشخص هستند.

**همسایه زمینی**: تایل‌ها با تایلی که با آن ضلع مشترک دارند همسایه زمینی‌اند. (راس مشترک فاقد هرگونه اهمیت در روند بازی می‌باشد)

**همسایه دریایی**: مجموعه همه تایل‌هایی که به یک دریا راه دارند همسایه دریایی اند مثلا تایل ۸ و ۳۵ و ۵۴ همسایه دریایی هم اند.

**کارخانجات**: در هر تایل ممکن است یک سری کارخانه ساخته شود. تعریف کارخانه را جلوتر خواهید دید.

**ترین terrain**: هر تایل یک ترین خاص دارد که در طول روند بازی مشخص می‌شود. تعریف ترین و تاثیر آن را جلوتر خواهید دید.

**آب‌و‌هوا weather**: تاثیر و انواع جلوتر گفته خواهد شد.

**گردان battalion**:در هر تایل یک یا چند گردان نظامی مستقر شده که هم حمله و هم دفاع میکنند. توضیحات بیشتر داده خواهد شد.

#### دستورات

با دستور زیر باید نام کشوری که مالک تایل است چاپ شود.

```
tile owner <index>
```

خروجی نمونه برای ایندکس ۴۴ :

```
German Reich
```


با دستور زیر همسایه های زمینی تایل سورت شده باید چاپ شود.

```
tile neighbors <index>
```

خروجی نمونه‌ برای ایندکس ۲۲:

```
16 , 21 , 28 , 43
```


با دستور زیر همسایه های دریایی تایل سورت شده باید چاپ شوند.

```
tile sea neighbors <index>
```

خروجی نمونه برای ایندکس ۸:

```
35 , 36 , 54
```


تمامی دستورات تایل فوق برای اطمینان‌سازی از درست ساخته شدن مپ توسط شماست که تست کیس مربوطه برای چک کردن داده خواهد شد.

با دستور زیر آب و هوای تایل چاپ می‌شود.
```
show weather <tile-index>
```

خروجی :
```
<weather-name>
```

با دستور زیر نوع ترین تایل چاپ می‌شود.
```
show terrain <tile-index>
```

خروجی :
```
<terrain-name>
```

با دستور زیر لیست گردان های موجود در تایل گفته شده چاپ می‌شود. این دستور یک تفاوت با دستورات بالا دارد و این است که فقط روی تایل های کشور خودمان یا کشور های پاپت کار می‌کند‌. توجه شود که عواملی مثل سطح گردان و  نوع ترین و نوع آب و هوا و مقدار اسیران گرفته شده بعد از بردن جنگ بر مقدار power تاثیر می‌گذارد و نباید مقدار اولیه را چاپ کنید. همچنین capture ratio نیز به درصد اسارت اشاره دارد.

```
show battalions <tile-index>
```

```
infantry:
<battalion-name> <level> <power> <capture-ratio>
<battalion-name> <level> <power> <capture-ratio>

panzer:
<battalion-name> <level> <power> <capture-ratio>
<battalion-name> <level> <power> <capture-ratio>

airforce:
<battalion-name> <level> <power> <capture-ratio>
<battalion-name> <level> <power> <capture-ratio>
<battalion-name> <level> <power> <capture-ratio>

navy:
<battalion-name> <level> <power> <capture-ratio>
```

اگر به تایل دسترسی نداشتیم :
```
can't show battalions
```


در هر دستور مربوط به تایل اگر ایندکس تایل وجود نداشت پیام زیر چاپ شود.

```
tile doesn't exist
```


### نوع زمین (Terrain)

هر تایل دارای ترین مشخص است که نوع زمین تایل را مشخص می‌کند. نوع زمین روی قدرت حملات، هزینه‌ی ساخت کارخانه و تولید سوخت اثر می‌گذارد.

ترین ها ازین قبیلند:

- Mountain
- Forrest
- Desert
- Urban
- Plain

تاثیرات ترین های مختلف در فرایند بازی به صورت زیر است. این متغیر ها در جلوتر توضیح داده خواهد شده است.

![terrain](https://s33.picofile.com/file/8483046600/Group_35096.png)

برای انتخاب ترین برای یک تایل دستور زیر را وارد کنید.
```
set terrain <tile-index> <terrain-name>
```

#### **خطاها**
اگر بازیکن کنونی صاحب تایل انتخابی نباشد:
```
you don't own this tile
```

اگر ایندکس انتخاب شده موجود نبود:
```
tile doesn't exist
```

اگر اسم ترین وارد شده اشتباه بود و جز 5 تا گزینه ممکن نبود:
```
terrain doesn't exists
```

اگر هیچکدام از خطا های بالا رخ نداد.

```
terrain set successfully
```

ترین دیفالت برای همه تایل‌ها plain است.

### آب و هوا (weather)
برای هر تایل یک نوع آب و هوا در نظر گرفته می‌شود که خود برای انواع حملات محدودیت ایجاد می‌کند. به طور مثال در هوای برفی یا بارانی ضرایبی روی قدرت ها میخورد.

برای انتخاب آب و هوا برای یک تایل دستور زیر را وارد کنید:
```
set weather <tile-index> <weather-name>
```

#### **خطاها**
اگر ایندکس انتخاب شده موجود نبود:
```
tile doesn't exist
```

اگر بازیکن کنونی صاحب تایل انتخابی نباشد:
```
you don't own this tile
```

اگر اسم آب و هوای وارد شده اشتباه بود و جزء گزینه‌های ممکن نبود:
```
weather doesn't exist
```

اگر هیچکدام از خطا های بالا رخ نداد.

```
weather set successfully
```

در ابتدای بازی همه تایل ها Sunny هستند.

### گردان (battalion)
در هر تایل واحد های نظامی بنام گردان قرار دارند که به 4 نوع زیر هستند. از هر نوع می‌توان چند عدد در یک تایل ساخت.
```
infantry
panzer
airforce
navy
```

هر گردان ۲ نوع مادیفایر  دارد که روی امتیازی که از حملات می‌گیرد یا از دست می‌دهد تاثیر خود را می‌گذارد:

**قدرت** : با توجه به این قدرت روی امتیاز کاسته شده از تایل مورد هجوم اثر می‌گذارد.

![Powers](https://s33.picofile.com/file/8483104600/Group_35098.png)


**اسارت** : درصد اسارت یک گردان مشخص میکند که بعد از حمله یا دفاع ، چند درصد از قدرت خود را به گردان حریف می‌بازد. در صورت باختن ، **قدرت آن گردان** * **درصد اسارت** به قدرت همه گردان های از همان نوع حریف اضافه می‌شود. قدرت ها ضرب شده مربوط به قدرت پایه و قبل از اعمال اثرات هوا و ترین است. قدرت پایه همان قدرت با محاسبه ارتقا ها و میزان اسیر های گرفته شده از قبل است و منظور مقدار اولیه درون جدول نیست.

![Capture](https://s33.picofile.com/file/8483104842/Group_35099.png)

در هر تایل یک مجموعه از انواع مختلف گردان ها موجود است. از هر نوع گردان مثلا panzer می‌تواند چند تا در همان تایل موجود باشد که باید برای تشخیص اسم های متفاوت داشته باشند‌ (اسم هارا هنگام ساخت گردان دلخواه انتخاب می‌کنید و اگر بین هر گردانی که داخل همان تایل باشد اسمش تکراری بود ارور دریافت می‌کنید. حتی اگر اسم یک گردان panzer با یک airforce که هردو در یک تایل باشند باید ارور دریافت کنید.)

در یک تایل حداکثر ۳ گردان از یک نوع می‌توان قرار داد.

هنگام حمله و دفاع ، گردان های از یک نوع باهم مقایسه می‌شوند.یعنی ‌مثلا اگر آلمان در یک تایلی ۳ تا panzer داشت به آمریکا از تایلی که ۲ تا panzer دارد حمله کند :

قدرت آلمان : 3 * 20
قدرت آمریکا‌ : 2 * 10

یعنی درواقع قدرت ها اینجوری محاسبه می‌شوند:
```
power = battalion_power * terrain_modifier * weather_modifier * leader-popularity
```

این مقدار قدرت برای یک گردان است. مقدار قدرت کل جمع قدرت گردان ها است.

درصد ترین و آب و هوا برای navy بی تاثیر است . برای زمینی ها attack و برای هوایی ها air attack.

همچنین درصد محبوبیت رهبر هم در این مقدار نهایی ضرب می‌شود.

حالا در این مثالی که زدیم تاثیرات دیگر نیست. با این حساب میبینیم که آلمان به عنوان حمله کننده در این جنگ پیروز است. اتفاقی که می‌افتد این است که تمام گردان های مربوطه یعنی panzer برای آمریکا در آن تایل حذف می‌‌شوند و این مقدار قدرت به هر ۳ گردان panzer آلمان اضافه می‌شود:
```
each_panzer_germany += panzer1_usa_power * capture_percentage + panzer2_usa_power * capture_percentage
```

در نهایت تایل مربوطه کشور آمریکا به تصاحب آلمان درمیاید (owner) اش عوض می‌شود و کنترل آن به دست بازیکنی که آلمان را کنترل می‌کند می‌افتد.

در مثال ما هر ۳ گردان آلمان قدرتشان با ۱۰ * (۴/۱۰) + ۱۰ * (۴/۱۰) می‌شوند یعنی الان قدرت گردان های آلمان که ۲۰ بودند می‌شود ۲۸.
این یک مثال خیلی ساده است. ممکن است قدرت هرکدام از panzer ها طی آپگرید ها تغییر کند و متفاوت باشند.

هزینه های اضافه کردن گردان جدید به صورت جدول زیر است :

![cost](https://s33.picofile.com/file/8483169118/Battalion_cost.png)

اگر رهبر کشور شما دارای ایدئولوژی دموکراسی باشد تمام هزینه های بالا ضربدر ۲ می‌شود مثلا برای ساخت گردان پنزر باید ۲۰۰۰۰ سوخت ، ۴۰۰۰۰ فولاد ، ۲۰۰۰۰ گوگرد و ۱۰۰۰۰ نفر جمعیت استفاده کند.

#### اضافه کردن گردان جدید به یک تایل:

با دستور زیر می‌توانید یک گردان در کشور خود یا پاپت خود یا هم جناح خود بسازید:
```
add battalion <tile-index> <battalion> <name>
```


#### **خطاها**

اگر  تایل وارد شده برای ما یا پاپت ها یا هم جناح ها نبود یا وجود نداشت:
```
tile is unavailable
```

اگر نوع گردان جز 4 حالت ممکن نبود:
```
you can't use imaginary battalions
```

اگر اسم گردان در همان تایل تکراری بود:
```
battalion name already taken
```

اگر توانایی مالی ساخت گردان را نداشتید:
```
daddy USA plz help us
```

اگر از آن نوع گردان در آن تایل ۳ تا وجود داشت دیگر نمی‌‌توانید از آن نوع گردان در آن تایل بسازید. اگر به ماکسیمم رسیده بودید:
```
you can't add this type of battalion anymore
```

در غیر این صورت:
```
battalion set successfully
```

#### جابه‌جایی گردان به تایل های دیگر
شما با دستور زیر می‌توانید گردان مورد نظر را به یک تایل دیگر از کشور خود یا پاپت یا کشور های هم جناح انتقال دهید. این جابه جایی دوطرفه است یعنی می‌توان از هم جناح به کشور خودمان انتقال دهیم.
```
move battalion <tile-index> <battalion-name> <destination-tile-index>
```

در بخش نام گردان باید نام دلخواهی که برای گردان انتخاب کردید را بگذارید.

#### **خطاها**

گر  تایل وارد شده برای ما یا پاپت ها یا هم جناح ها نبود یا وجود نداشت:
```
tile is unavailable
```

اگر گردانی با اسم برگزیده وجود نداشت:
```
no battalion with the given name
```

در غیر این صورت:
```
battalion moved successfully
```

#### ارتقا گردان ها
گردان ها با پرداخت هزینه ای می‌توانند قدرت خود را افزایش دهند. در ابتدای کار هنگام ساخت گردان آن گردان در سطح صفر قرار دارد. هزینه های ارتقا و میزان ارتقا ها به صورت زیر است:

هزینه سطح صفر به یک : نصف هزینه ساخت اولیه گردان
هزینه سطح یک به دو : به اندازه هزینه ساخت اولیه گردان
هزینه سطح دو به سه : دو برابر اندازه هزینه ساخت اولیه گردان

میزان ارتقا قدرت سطح صفر به یک : +۵
میزان ارتقا قدرت سطح یک به دو : +۷
میزان ارتقا قدرت سطح دو به سه : +۱۰

‌ازونجایی که محاسبه قدرت با حساب تمام این عوامل شاید یک گیج کننده شده باشد یک بار دیگر از اول روند محاسبه قدرت یک گردان رو توضیح میدم:

- ابتدا قدرت اولیه یک گردان را بر حسب کشوری که در آن قرار دارد را ذخیره می‌کنیم.
- مقدار قدرتی که از اسیران جنگ حاصل شده به این مقدار اضافه می‌شود.
- بر اساس سطح هم مقداری افزود می‌شود مثلا اگر سطح ۲ باشد : power += 5 + 7
- بر اساس نوع گردان ،  قدرتی که تا این مرحله بدست اووردیم طبق جدول بخش ترین درصد می‌خورد. برای گردان airforce ضریب air attack را تاثیر میدهیم و برای panzer و infantry درصد attack. برای گردان navy درصد ترین را محاسبه نمی‌کنیم. توجه شود ترینی که حمله در آن صورت می‌گیرد ملاک است. یعنی برای مدافع ، درصد های همان ترینی که درون آن است و برای مهاجم درصد ترینی که در تایلی که به آن حمله می‌کند است. 
- همین مسائل گفته شده ترین ، برای آب و هوا نیز صادق است.
- در نهایت درصد محبوبیت رهبر کنونی را در مقدار محاسبه شده ضرب می‌کنیم.

نکته : در تمامی مراحل محاسبه قدرت مقدار ‌int مد نظر است. پس هر جا مقدار اعشاری محاسبه قد آن را قدر مطلق بزنید. در هر مرحله باید قدر مطلق گرفته شود. نه صرفا مقدار نهایی . مثلا اگر بعد از اضافه کردن درصد ترین مقداری ممیز دار حساب کردیم باید آن را floor کنیم و سپس درصد آب و هوا را دخیل کنیم. 

### جناح (Faction)
کشور ها با عوض شدن در یک جناح می‌توانند از یکسری مزایا بهره مند شوند:
- ساخت گردان در کشور همدیگر
- جابه‌جایی گردان بین کشور ها
- ساخت کارخانه در کشور همدیگر
- ناتوانی در حمله کردن به یکدیگر
- ناتوانی در پاپت کردن یکدیگر

توجه شود که یک کشور می‌تواند عضو چندین جناح باشد.

#### ساخت جناح
برای ساخت جناح دستور زیر را وارد کنید:
```
create faction <name>
```

اگر اسم جناح تکراری بود:
```
faction name already taken
```

در غیر این صورت :
```
faction created successfully
```

کشور بازیکنی که روی آن هستیم به صورت خودکار عضو این جناح می‌شود.
#### عضو شدن در یک جناح
برای عضویت در یک جناح دستور زیر را وارد کنید:
```
join faction <faction-name>
```

اگر جناح وارد شده وجود نداشت:
```
faction doesn't exists
```

در غیر این صورت :
```
<player-country-name> joined <faction-name>
```

#### خروج از جناح 

مانند قبلی ها:
```
leave faction <faction-name>
```

```
your country isn't in this faction
```

```
<country-name> left <faction-name>
```

در تمامی دستورات بالا کشور مد نظر کشوری است که بازیکنی که نوبتش است کنترل می‌کند.

###  کارخانه (Factory)
در هر تایل چندین کارخانه می‌تواند ساخته شود. کارخانه ها کار تولید منابع را دارند. کارخانه های بازی در سه حالت زیر هستند:

```
steel factory
sulfur factory
fuel refinery
```

هر کارخانه با مصرف مقداری از جمعیت کشور یا همان man power مقداری منابع تولید می‌کند. میزان تولید بر حسب man power در جدول زیر آمده است. همچین هر کارخانه یک حداکثر میزان تولید دارد که بعد از رسیدن به این مقدار ماکزیمم کارخانه تخریب و از آن تایل حذف می‌شود.

جدول زیر اطلاعات اولیه هر کارخانه را شامل هزینه ساخت و میزان استخراج منابع بر حسب جمعیت مصرفی را نمایش می‌دهد و در نهایت ماکزیمم توانایی استخراج از آن:

![Factories](https://s33.picofile.com/file/8483140650/Group_35100.png)

عواملی بر هزینه ساخت فکتوری تاثیر دارد:
- در بخش ترین دیدید که درصدی به اسم Factory Cost داریم. پس هزینه ساخت کارخانه بر حسب ترین تایل هدف در این درصد ضرب می‌شود.
- اگر کشور کنونی دارای رهبر کمونیست باشد هزینه ساخت نصف می‌شود. هرچی باشد تقسیم بر ۲.

#### ساخت کارخانه
برای ساخت کارخانه در یک تایل دستور زیر را وارد کنید. ایندکس مورد نظر می‌تواند در پاپت و هم جناح نیز باشد:
```
build factory <tile-index> <factory-type> <name>
```

مقدار name دلبخواهی است.

#### **خطا‌ها**
اگر ایندکس تایل داده شده برای ما یا پاپت یا هم جناح نبود یا اصلا وجود نداشت:
```
invalid tile
```

اگر نوع کارخانه اشتباه بود و جز ۳ گزینه بالا نبود:
```
invalid factory type
```

در غیر این صورت :
```
factory built successfully
```

منابع مورد نیاز برای ساخت همواره از کشور بازیکن کنونی کم می‌شود و کاری به کشور های پاپت و هم جناح ندارد.

#### برداشت از کارخانه

برداشت از کارخانه اینگونه است که یک مقدار man power مصرف می‌کنیم و طبق جدول داده شده منابع دریافت می‌کنیم.

در جدول بخش ترین یک مقدار بنام fuel production داریم که برای بعضی ترین ها درصد استخراج را کم و بعضا ۰ می‌کند. اگر ۰ باشد اروری دریافت نمی‌کنیم فقط جمعیت هدر می‌دهیم.

برداشت منابع:
```
run factory <tile-index> <name> <man-power-count>
```

مقدار name همان اسم دلبخواهی ای است که به کارخانه موقع ساختن دادید.

#### **خطا‌ها**

اگر ایندکس تایل داده شده برای ما یا پاپت یا هم جناح نبود یا اصلا وجود نداشت:
```
invalid tile
```

اگر اسم داده شده برای کارخانه در آن تایل وجود نداشت:
```
this tile doesn't contain this factory
```

اگر مقدار man power داده شده را نداشتیم:
```
you are poor!
```

اگر مقدار برداشتی از ماکسیمم حدی که از کارخانه می‌تواند برداشت کند عبور کرد، به همان مقدار که می‌توانیم برداشت می‌کنیم و سپس کارخانه را حذف می‌کنیم.

اگر برداشت از پاپت یا هم جناح بود ، منابع وارد حساب کشور بازیکن کنونی می‌رود و manpower نیر از کشور بازیکن کنونی کم می‌شود.

در نهایت اگر برداشت موفقیت آمیز بود:
```
factory extracted <extraction-amount> of <resource-type>
```

مقدار منابع دریافتی برابر است با manpower * production per manpower.

نوع منابع هم همانطور که گفته شد این ها است:
- fuel
- sulfur
- steel

---

## مکانیک های بازی

### حمله به کشور های دیگر

قابلیت حمله به کشور های دیگر هم از کشور خود پلیر و هم از کشور های پاپت آن قابل انجام است.
حمله با گردان های infantry و panzer فقط از مرز های زمینی قابل انجام است. حمله با گردان navy فقط از مرز های دریایی قابل انجام است. حمله با airforce هم محدودیتی ندارد :)

برای حمله به کشور های دیگر دستور زیر را وارد کنید.
```
attack <our-tile-index> <enemy-tile-index> <battalion-type>
```

همانطور که در بخش battalion توضیح داده شد ، حمله بین گردان های هم جنس برگزار می‌شود. در این دستور با وارد کردن نوع گردان مورد نظر بین گردان های برگزیده و گردان هم جنس آن در تایل حریف جنگ برقرار می‌شود.
در نهایت دو حالت پیش می‌آید:

**بردن حمله کننده** : در این صورت تایل کشور مدافع به تصاحب کشور حمله کننده در می‌آید. 

**بردن مدافع** : بر حسب اختلاف قدرتی که با آن پیروز شد مقداری منابع به جیب می‌زند.

رهبر کشور برنده محبوبیت کسب می‌کند و ثبات کشور بالا می‌رود. همینطور نیز کشور بازنده این هارا از دست می‌دهد. این ضرایب به این صورتند:

```
stability-winner *= 110%
winner-leader-popularity *= 105%
```

و برای بازنده :
```
stability-loser *= 50%
loser-leader-popularity *= 40%
```

اگر کشور مدافع برنده شد برحسب اختلاف قدرتی که با آن تونست برنده بشه مقداری منابع دریافت می‌کند:
```
steel += power-diff * 100
sulfur += power-diff * 100
fuel += power-diff * 1000
```

همچنین تاثیرات اسیران جنگی که در قسمت گردان ها توضیح داده شد را هم در نظر داشته باشید.

**نکات**
- شما از کشوری که پاپت شده است نمی‌توانید به کشور پاپت کننده شما حمله کنید ، اما برعکس این کار را می‌توانید بکنید. یعنی کشور پاپت کننده می‌تواند به پاپت خود حمله کند.
- بین کشور های هم جناح نمی‌توان جنگ کرد.

### خطاها
اگر تایل انتخاب شده اولی در کشور ما یا پاپت ما موجود نبود:
```
attacker tile unavailable
```

اگر نوع battalion انتخابی در تایل ما وجود نداشت:
```
selected type doesn't have this type of battalion
```

تایل حریف شرایط مورد نیاز را نداشت یعنی در همسایگی مورد نظر نبود یا مال کشور پاپت کننده بود یا هم جناح بود:
```
enemy tile unavailable for attacking 
```

در نهایت نتیجه جنگ به این صورت مشخص می‌شود.
```
war is over 
winner : <winner-country-name>
loser : <loser-country-name>
```

توجه شود که اگر با کشور پاپت حمله کردیم نام همان کشور پاپت را می‌نویسیم.

---
## جنگ داخلی (Civil War)
کانسپت جنگ داخلی مانند جنگ عادی است با این تفاوت که بین تایل های یک کشور انجام می‌شود. تاثیرات این حملات بر میزان ثبات کشور بیشتر است. تاثیرات اسارت پس از جنگ باقی است ولی تاثیرات ثبات و محبوبیت متفاوت است.
اگر رهبر کنونی کشور communist باشد نمی‌توانیم جنگ داخلی کنیم.

برای آغاز جنگ داخلی :
```
start civil war <tile1> <tile2> <battalion type>
```

### خطاها
اگر رهبر کنونی کومونیست بود:
```
no civil war for you comrade
```

اگر تایل های داده شده جز تایل های کشور ما نبودند:
```
invalid tiles for civil war
```

اگر تایل های داده شده شروط همسایگی گفته شده در بخش battalion را نداشتند :
```
can't start civil war between these tiles
```

اگر نوع گردان داده شده اشتباه بود یا در تایل اول وجود نداشت:
```
invalid battalion type
```

در غیر این صورت جنگ داخلی با موفقیت انجام می‌شود و تغییرات زیر در ثبات کشور رخ می‌دهد:
```
stability *= 10%
leader-popularity *= 10%
```  

و در نهایت پیام زیر چاپ می‌شود:
```
civil war ended. <winner-tile-index> won.
```

---
## پاپت (Puppet)
وقتی یک کشور پاپت یک کشور دیگر می‌شود ، کنترل تمام دستورات آن کشور به دست کشور پاپت کننده می‌افتد .
این به این معنا نیست که پلیر صاحب آن کشور حقی بر کنترل کشور خود ندارد فقط به این معنا است که یک کنترل کننده دیگر برای آن کشور در نظر گرفته می‌شود.
شرایطی که بتوانیم یک کشور را پاپت خود بکنیم این است که :

- دارای  man power  بیشتر باشیم.
- هیچکدام از تایل های اولیه کشور ما توسط آن کشور طی جنگ ها گرفته نشده باشد.
- حداقل 2 تایل از کشور مورد نظر توسط ما طی جنگ گرفته شده باشد.
- رهبر کنونی کشورمان یا communist باشد یا fascist.
- با آن کشور هم جناح نباشیم.

هر 4 شرط بالا باید برقرار باشد.

برای پاپت کردن یک کشور دستور زیر را وارد کنید.
```
puppet <country-name>
```

اگر کشور مورد نظر وجود نداشت دستور زیر:
```
country doesn't exist
```

اگر حتی یکی از 4 شرط بالا برقرار نبود :
```
you are not allowed to puppet this country
```

در غیر این صورت 
```
now <country-name> is my puppet yo ho ha ha ha
```

---